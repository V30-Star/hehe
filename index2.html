<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Story is begin — Page 2</title>
    <style>
      :root {
        --bg: #0b0e16;
        --ink: #eaf0ff;
        --muted: #9aa6bf;
        --card: #131a34;
        --border: #263056;
        --accent: #86e0ff;
        --good: #22c55e;
        --bad: #ef4444;
        --radius: 28px;
        --shadow: 0 24px 60px rgba(0, 0, 0, 0.45);
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        color: var(--ink);
        background: radial-gradient(1100px 520px at 15% -10%, #1a2b57 0%, transparent 60%) no-repeat, radial-gradient(1000px 640px at 110% 0%, #2a1c49 0%, transparent 60%) no-repeat, var(--bg);
        font: 16px/1.6 Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
        padding: 24px;
      }

      .wrap {
        max-width: 1100px;
        margin: 0 auto;
      }

      /* Header */
      header {
        display: flex;
        align-items: center;
        gap: 14px;
        margin: 2px 0 18px;
      }
      .logo {
        width: 54px;
        height: 54px;
        border-radius: 14px;
        display: grid;
        place-items: center;
        background: conic-gradient(from 230deg, #2c3b63, #1b2140 35%, #12162b 70%, #2c3b63);
        color: #cfe0ff;
        font-weight: 800;
        box-shadow: var(--shadow), inset 0 -10px 20px rgba(0, 0, 0, 0.35);
      }
      h1 {
        margin: 0;
        font-size: clamp(24px, 3.4vw, 38px);
      }
      .subtitle {
        color: var(--muted);
      }

      /* Card */
      .card {
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0) 60%), var(--card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        overflow: hidden;
      }
      .card-head {
        padding: 16px 18px 0;
        position: relative;
      }
      .badge {
        position: absolute;
        top: 14px;
        left: 14px;
        background: #121a39;
        border: 1px solid #2a3568;
        color: #d6e2ff;
        font-size: 12px;
        padding: 6px 10px;
        border-radius: 999px;
        letter-spacing: 0.2px;
      }

      /* Hero image */
      .hero {
        display: grid;
        place-items: center;
        padding: 10px 18px 0;
      }
      .art {
        width: min(1000px, 96%);
        aspect-ratio: 16/9;
        border-radius: 20px;
        border: 1px solid #263056;
        overflow: hidden;
        background: radial-gradient(600px 320px at 100% 0%, rgba(134, 224, 255, 0.12), transparent 60%), #0f1530;
        position: relative;
      }

      /* Blur state (unsolved) -> clear when solved */
      .veil {
        position: absolute;
        inset: 0;
        backdrop-filter: blur(10px) saturate(0.7) brightness(0.85);
        transition: 0.35s;
      }
      body.solved .veil {
        backdrop-filter: none;
        background: transparent;
      }

      /* Caption chips */
      .chip {
        position: absolute;
        font-size: 10px;
        letter-spacing: 0.4px;
        color: #d7e6ff;
        background: #152047;
        border: 1px solid #30408a;
        padding: 4px 6px;
        border-radius: 999px;
        opacity: 0.75;
      }
      .chip.tl {
        top: 8px;
        left: 8px;
      }
      .chip.tr {
        top: 8px;
        right: 8px;
      }
      .chip.bl {
        bottom: 8px;
        left: 8px;
      }
      .chip.br {
        bottom: 8px;
        right: 8px;
      }

      .card-body {
        padding: 16px 18px 22px;
      }
      h2 {
        margin: 0.3rem 0 0.5rem;
        font-size: 20px;
      }
      p {
        margin: 0.25rem 0 0.7rem;
      }
      ul {
        margin: 0.25rem 0 0.5rem 1.2rem;
      }
      .muted {
        color: var(--muted);
      }
      .divider {
        height: 1px;
        background: linear-gradient(90deg, transparent, #2a3355, transparent);
        margin: 12px 0;
      }

      /* Input area */
      .qa {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
      }
      .answer {
        flex: 1 1 280px;
        min-width: 240px;
        font-size: 16px;
        padding: 12px 14px;
        border-radius: 12px;
        border: 1px solid #2a3355;
        background: #0e132a;
        color: #eaf0ff;
        outline: none;
        transition: 0.2s;
      }
      .answer:focus {
        border-color: #7ee0ff;
        box-shadow: 0 0 0 4px rgba(126, 224, 255, 0.12);
      }
      .btn {
        padding: 12px 18px;
        border-radius: 12px;
        border: 1px solid #2a3355;
        background: #16204a;
        color: #cfe0ff;
        cursor: pointer;
        transition: 0.2s;
      }
      .btn:hover {
        transform: translateY(-1px);
      }
      .btn.ok {
        background: #1b8a57;
        border-color: #1b8a57;
        color: #fff;
      }
      .btn.err {
        animation: shake 0.28s;
        border-color: var(--bad);
      }
      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-6px);
        }
        50% {
          transform: translateX(6px);
        }
        75% {
          transform: translateX(-6px);
        }
      }

      /* Success banner */
      .success {
        display: none;
        margin-top: 10px;
        font-size: 14px;
        color: #c5ffd9;
        background: #0e2a18;
        border: 1px solid #1a4a2f;
        padding: 10px 12px;
        border-radius: 10px;
      }
      body.solved .success {
        display: block;
      }
      body.solved h1::after {
        content: " — Story is begin";
        color: #9ee8ff;
        font-weight: 600;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div class="logo">P2</div>
        <div>
          <h1>Page 2</h1>
          <div class="subtitle">Pecahkan teka-tekinya dulu</div>
        </div>
      </header>

      <article class="card">
        <div class="card-head">
          <span class="badge" id="status">Locked</span>
        </div>

        <div class="hero">
          <!-- Inline SVG: “samar” food stall + kodok (Anura) + koordinat -->
          <div class="art">
            <svg viewBox="0 0 1200 675" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Gambar samar: kios makanan malam & siluet katak">
              <defs>
                <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0" stop-color="#0e1430" />
                  <stop offset="1" stop-color="#0a1026" />
                </linearGradient>
                <radialGradient id="glow" cx="40%" cy="35%" r="65%">
                  <stop offset="0" stop-color="#ffd36a" stop-opacity=".25" />
                  <stop offset="1" stop-color="#ffd36a" stop-opacity="0" />
                </radialGradient>
                <clipPath id="frogBody">
                  <ellipse cx="380" cy="160" rx="160" ry="90" />
                </clipPath>
              </defs>
              <rect width="1200" height="675" fill="url(#bg)" />
              <ellipse cx="560" cy="500" rx="360" ry="90" fill="url(#glow)" opacity=".22" />
              <!-- street stall -->
              <g opacity=".85">
                <rect x="360" y="240" width="480" height="220" rx="14" fill="#17214a" stroke="#2a3568" />
                <rect x="360" y="200" width="480" height="50" rx="10" fill="#1d2757" />
                <rect x="380" y="270" width="140" height="110" rx="10" fill="#111a3f" />
                <rect x="540" y="270" width="140" height="110" rx="10" fill="#111a3f" />
                <rect x="700" y="270" width="120" height="110" rx="10" fill="#111a3f" />
                <!-- skewers hint -->
                <g transform="translate(565,300)" opacity=".5">
                  <rect x="-12" y="-12" width="24" height="24" rx="4" fill="#ffd36a" />
                  <rect x="30" y="-12" width="24" height="24" rx="4" fill="#ffd36a" />
                  <rect x="72" y="-12" width="24" height="24" rx="4" fill="#ffd36a" />
                </g>
              </g>
              <!-- frog / Anura silhouette -->
              <g transform="translate(260,360) scale(1.2)" fill="#6f87b8" opacity=".55">
                <ellipse cx="380" cy="160" rx="160" ry="90" />
                <circle cx="290" cy="120" r="30" />
                <circle cx="470" cy="120" r="30" />
                <circle cx="282" cy="115" r="8" fill="#dbe6ff" opacity=".7" />
                <circle cx="462" cy="115" r="8" fill="#dbe6ff" opacity=".7" />
                <path d="M290,210 C340,240 420,240 470,210" stroke="#dbe6ff" stroke-width="6" opacity=".3" fill="none" />
                <!-- legs -->
                <ellipse cx="300" cy="230" rx="60" ry="20" transform="rotate(-20 300 230)" />
                <ellipse cx="460" cy="230" rx="60" ry="20" transform="rotate(20 460 230)" />
                <g clip-path="url(#frogBody)" opacity=".08">
                  <text x="380" y="180" text-anchor="middle" font-size="60" font-weight="700" font-family="Inter, Arial" fill="#0f1430" transform="rotate(-5 380 180)">1000000</text>
                </g>
              </g>
            </svg>
          </div>
        </div>

        <!-- PROGRESSIVE HINT MODAL -->
        <div id="hintsModal" class="hint-modal-backdrop" aria-hidden="true">
          <div class="hint-modal" role="dialog" aria-modal="true" aria-labelledby="hintTitle">
            <button class="hint-close" id="closeHints" aria-label="Close hints">✕</button>

            <div class="hint-header">
              <div class="hint-badge">Clues</div>
              <h3 id="hintTitle">Hint untuk Teka-teki</h3>
              <p class="hint-sub">Klik “Reveal next hint” untuk membuka petunjuk berikutnya (maks 3).</p>
              <div class="hint-progress"><span id="hintCount">0</span>/3 revealed</div>
            </div>

            <div class="hint-content">
              <!-- Hidden by default; shown progressively via JS -->
              <div class="hint-card" data-hint="1" hidden>
                <div class="hint-chip">Hint 1</div>
                <p>Koordinat lokasi kuliner: <strong>6°55′19″S 107°36′25″E</strong>.</p>
              </div>
              <div class="hint-card" data-hint="2" hidden>
                <div class="hint-chip">Hint 2</div>
                <p>Logo coin crypto favorite saya</p>
              </div>
              <div class="hint-card" data-hint="3" hidden>
                <div class="hint-chip">Hint 3</div>
                <p>
                  Nama ilmiah: <strong>Anura</strong><br />
                  Kerajaan: <strong>Animalia</strong> · Kelas: <strong>Amphibia</strong> · Filum: <strong>Chordata</strong><br />
                  Ordo: <strong>Anura; Duméril, 1806</strong>
                </p>
              </div>
            </div>

            <div class="hint-footer">
              <button id="revealNextHint" class="btn pill-btn" type="button">Reveal next hint</button>
            </div>

            <!-- Tiny penalty bubble appears briefly on each reveal -->
            <div id="penaltyBurst" class="penalty-burst" aria-hidden="true">−1 hint credit</div>
          </div>
        </div>

        <div class="card-body">
          <h2>Pertanyaan</h2>
          <p class="muted">Sang pacar suka makan apa? dan dimasak apa?</p>
          <div class="qa">
            <input id="answer" class="answer" type="text" placeholder="ketik jawaban…" autocomplete="off" />
            <button id="checkBtn" class="btn">Periksa</button>
            <button id="openHints" class="btn" type="button" style="margin-left: auto">💡 Hint</button>
          </div>
          <div id="msg" class="muted" style="margin-top: 8px">Gunakan kata kunci tepat. Terdapat 3 kata</div>
          <div class="divider"></div>
          <div class="success">✅ Benar. Gambar dibuka. <strong>Story is begin.</strong></div>
        </div>
      </article>
    </div>

    <script>
      // URL gambar: jika file satu folder dengan index2.html, cukup './swikeee.jpg'
      // atau gunakan '/ultah/swikeee.jpg' bila berada di http://localhost/ultah/swikeee.jpg
      const PHOTO_URL = "./swikeee.jpg";

      const photo = document.getElementById("revealPhoto");

      // Preload biar muncul instan
      const preload = new Image();
      preload.src = PHOTO_URL;

      // --- kode existing kamu ---
      const ans = document.getElementById("answer");
      const btn = document.getElementById("checkBtn");
      const msg = document.getElementById("msg");
      const statusBadge = document.getElementById("status");

      function normalize(s) {
        return s
          .toLowerCase()
          .normalize("NFKD")
          .replace(/\s+/g, " ")
          .replace(/[^a-z0-9\s]/g, "")
          .trim();
      }
      const correct = normalize("swike goreng tepung");

      btn.addEventListener("click", () => {
        const val = normalize(ans.value);
        if (val === correct) {
          // set foto & tampilkan
          if (photo && !photo.src) photo.src = PHOTO_URL;

          document.body.classList.add("solved");
          btn.classList.remove("err");
          btn.classList.add("ok");
          btn.textContent = "Unlocked";
          msg.textContent = "Jawaban tepat. Selamat";
          if (statusBadge) {
            statusBadge.textContent = "Unlocked";
            statusBadge.style.background = "#0e2a18";
            statusBadge.style.borderColor = "#1a4a2f";
            statusBadge.style.color = "#c5ffd9";
          }
          // Auto next ke page 3
          setTimeout(() => {
            window.location.href = "index3.html";
          }, 1500);
        } else {
          btn.classList.remove("ok");
          btn.classList.add("err");
          msg.textContent = "Belum tepat. Coba lagi ya (lihat Hint kalau perlu).";
          if (statusBadge) statusBadge.textContent = "Locked";
        }
      });

      ans.addEventListener("keydown", (e) => {
        if (e.key === "Enter") btn.click();
      });
    </script>

    <style>
      /* Backdrop + modal */
      .hint-modal-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(4, 7, 18, 0.55);
        display: none; /* shown via JS */
        align-items: center;
        justify-content: center;
        padding: 20px;
        z-index: 80;
        backdrop-filter: blur(2px);
      }
      .hint-modal {
        width: min(720px, 96vw);
        background: #121a36;
        border: 1px solid #2a3355;
        border-radius: 16px;
        box-shadow: 0 24px 60px rgba(0, 0, 0, 0.55);
        position: relative;
        animation: hintPop 0.22s ease-out;
      }
      @keyframes hintPop {
        from {
          opacity: 0;
          transform: translateY(8px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: none;
        }
      }

      .hint-close {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #1a2246;
        border: 1px solid #2d3972;
        color: #dbe6ff;
        font-size: 14px;
        line-height: 1;
        border-radius: 10px;
        padding: 6px 8px;
        cursor: pointer;
      }
      .hint-header {
        padding: 16px 18px 0;
      }
      .hint-badge {
        display: inline-block;
        font-size: 12px;
        color: #cfe0ff;
        background: #121a39;
        border: 1px solid #29326a;
        padding: 6px 10px;
        border-radius: 999px;
      }
      .hint-header h3 {
        margin: 8px 0 2px;
        font-size: 20px;
      }
      .hint-sub {
        margin: 0;
        color: #9aa6bf;
      }
      .hint-progress {
        margin-top: 6px;
        font-size: 12px;
        color: #9fb0da;
      }

      .hint-content {
        padding: 10px 18px 12px;
        display: grid;
        gap: 12px;
        max-height: 52vh;
        overflow: auto;
      }
      .hint-card {
        background: #0e132a;
        border: 1px solid #263056;
        border-radius: 12px;
        padding: 12px 14px;
      }
      .hint-chip {
        display: inline-block;
        font-size: 11px;
        color: #d7e6ff;
        background: #152047;
        border: 1px solid #30408a;
        padding: 4px 8px;
        border-radius: 999px;
        margin-bottom: 6px;
      }

      .hint-footer {
        padding: 6px 18px 16px;
        display: flex;
        justify-content: flex-end;
      }
      .pill-btn {
        border-radius: 999px;
      }

      /* Body scroll lock when modal open */
      body.modal-open {
        overflow: hidden;
      }

      /* Penalty animations */
      .penalty-burst {
        position: absolute;
        top: 10px;
        left: 12px;
        background: #34111b;
        color: #ffc6cf;
        border: 1px solid #5b1f2e;
        font-size: 12px;
        padding: 6px 10px;
        border-radius: 999px;
        opacity: 0;
        transform: translateY(-6px) scale(0.96);
        pointer-events: none;
      }
      .penalty-burst.show {
        animation: burst 900ms ease-out forwards;
      }
      @keyframes burst {
        0% {
          opacity: 0;
          transform: translateY(-6px) scale(0.96);
        }
        10% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
        70% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          transform: translateY(-10px) scale(0.98);
        }
      }

      /* Shake & pulse on reveal */
      .hint-modal.penalize {
        animation: shake 0.28s;
      }
      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-6px);
        }
        50% {
          transform: translateX(6px);
        }
        75% {
          transform: translateX(-6px);
        }
      }
      #status.penalize {
        border-color: #ef4444 !important;
        background: #2a0f16 !important;
        color: #ffc6cf !important;
        animation: pulse 600ms ease-out;
      }
      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.6);
        }
        100% {
          box-shadow: 0 0 0 12px rgba(239, 68, 68, 0);
        }
      }
    </style>

    <script>
      (function () {
        const modal = document.getElementById("hintsModal");
        const openBtn = document.getElementById("openHints");
        const closeBtn = document.getElementById("closeHints");
        const revealBtn = document.getElementById("revealNextHint");
        const burst = document.getElementById("penaltyBurst");
        const statusBadge = document.getElementById("status"); // from your page header
        const counter = document.getElementById("hintCount");

        let revealed = 0; // 0..3
        const maxHints = 3;

        function openModal() {
          modal.style.display = "flex";
          document.body.classList.add("modal-open");
          modal.setAttribute("aria-hidden", "false");
          closeBtn.focus();
        }
        function closeModal() {
          modal.style.display = "none";
          document.body.classList.remove("modal-open");
          modal.setAttribute("aria-hidden", "true");
          openBtn && openBtn.focus();
        }

        function showHint(n) {
          const card = modal.querySelector('.hint-card[data-hint="' + n + '"]');
          if (card && card.hasAttribute("hidden")) {
            card.removeAttribute("hidden");
          }
        }

        function penalizeFlash() {
          // shake modal + pulse status badge + bubble
          modal.classList.add("penalize");
          statusBadge && statusBadge.classList.add("penalize");
          burst.classList.add("show");
          setTimeout(() => {
            modal.classList.remove("penalize");
          }, 320);
          setTimeout(() => {
            statusBadge && statusBadge.classList.remove("penalize");
          }, 620);
          setTimeout(() => {
            burst.classList.remove("show");
          }, 920);
        }

        function updateRevealBtn() {
          if (revealed >= maxHints) {
            revealBtn.disabled = true;
            revealBtn.textContent = "All hints revealed";
          } else {
            revealBtn.disabled = false;
            revealBtn.textContent = "Reveal next hint";
          }
          counter.textContent = revealed;
        }

        // Events
        openBtn && openBtn.addEventListener("click", openModal);
        closeBtn && closeBtn.addEventListener("click", closeModal);
        modal &&
          modal.addEventListener("click", (e) => {
            if (e.target === modal) closeModal();
          });
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && modal.style.display === "flex") closeModal();
        });

        revealBtn &&
          revealBtn.addEventListener("click", () => {
            if (revealed < maxHints) {
              revealed += 1;
              showHint(revealed);
              penalizeFlash();
              updateRevealBtn();
            }
          });

        // init
        updateRevealBtn();
      })();
    </script>
  </body>
</html>
