<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Anniversary Challenge üìöüíï</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
      :root {
        --primary-pink: #d63384;
        --soft-blue: #e3f2fd;
        --dark-pink: #a02663;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #fce4ec 0%, #f3e5f5 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0;
        padding: 20px;
      }

      .card {
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        max-width: 550px;
        width: 100%;
        text-align: center;
      }

      h2 {
        color: var(--primary-pink);
        margin-top: 0;
      }

      #progress {
        font-size: 0.9rem;
        color: var(--primary-pink);
        background: #fff0f6;
        display: inline-block;
        padding: 5px 15px;
        border-radius: 15px;
        margin-bottom: 10px;
      }

      .question {
        text-align: left;
        margin: 20px 0;
        font-weight: 600;
        line-height: 1.5;
        color: #333;
      }

      .option {
        display: block;
        width: 100%;
        padding: 14px;
        margin: 10px 0;
        border: 2px solid #eee;
        border-radius: 12px;
        cursor: pointer;
        transition: 0.3s;
        text-align: left;
        box-sizing: border-box;
      }

      .option:hover {
        background-color: var(--soft-blue);
        border-color: #bbdefb;
        transform: translateX(5px);
      }

      /* Modal Style */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: 0.3s;
      }

      .modal-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .modal-content {
        background: white;
        padding: 30px;
        border-radius: 20px;
        max-width: 400px;
        width: 85%;
        text-align: center;
        transform: translateY(-20px);
        transition: 0.3s;
      }

      .modal-overlay.active .modal-content {
        transform: translateY(0);
      }

      .modal-btn {
        background: var(--primary-pink);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 25px;
        cursor: pointer;
        font-weight: bold;
        margin-top: 15px;
      }

      .hidden {
        display: none;
      }
      .btn-start {
        background: var(--primary-pink);
        color: white;
        border: none;
        padding: 15px 40px;
        border-radius: 30px;
        font-size: 1.1rem;
        cursor: pointer;
        font-weight: bold;
        box-shadow: 0 4px 15px rgba(214, 51, 132, 0.3);
      }
    </style>
  </head>
  <body>
    <div class="card">
      <div id="intro">
        <span style="font-size: 60px">üë©‚Äçüéì</span>
        <h2>The TOEFL Anniversary Mission</h2>
        <p>Selamat 7 bulan, Sayang! ‚ù§Ô∏è</p>
        <p>Aku sudah siapkan <strong>30 soal TOEFL</strong> MUDAH. Selesaikan semuanya untuk melihat kejutan dariku!</p>
        <button class="btn-start" onclick="startQuiz()">Accept Mission</button>
      </div>

      <div id="quiz-content" class="hidden">
        <div id="progress"></div>
        <div class="question" id="question-text"></div>
        <div id="options-container"></div>
      </div>

      <div id="success" class="hidden">
        <span style="font-size: 60px">üíñ</span>
        <h2>MISSION ACCOMPLISHED!</h2>
        <div style="background: #fff0f6; padding: 20px; border-radius: 15px; border: 2px dashed var(--primary-pink); margin: 20px 0">
          <p><strong>KEJUTANNYA ADALAH:</strong></p>
          <p>
            Karena kamu sudah bekerja keras, hadiahnya adalah...! <br />
            I love you so much! ‚ù§Ô∏è
          </p>
        </div>
      </div>
    </div>

    <div class="modal-overlay" id="customModal">
      <div class="modal-content">
        <span id="modalIcon" style="font-size: 50px"></span>
        <p id="modalMessage" style="margin: 20px 0; line-height: 1.6"></p>
        <button class="modal-btn" onclick="closeModal()">Lanjutkan Tantangan</button>
      </div>
    </div>

    <script>
      const questions = [
        // INTERMEDIATE (1-20)
        { q: "The North Pole ________ a latitude of 90 degrees north.", options: ["has", "it has", "which is having", "there is"], correct: 0, hint: "Butuh Verb utama." },
        { q: "The city of Beverly Hills is ________ on all sides by the city of Los Angeles.", options: ["surround", "surrounded", "surrounding", "surrounds"], correct: 1, hint: "Gunakan Passive Voice (to be + V3)." },
        {
          q: "________ greyhound, can reach speeds of up to 45 miles per hour.",
          options: ["The fastest dog", "The fastest dog is", "The fastest dog is the", "The fastest dog, the"],
          correct: 3,
          hint: "Gunakan appositive di antara dua koma.",
        },
        { q: "Marmots spend their time foraging among adulate plants ________ nights in their burrows.", options: ["and", "but", "and spending", "but spend"], correct: 2, hint: "Cari yang sejajar dengan 'foraging'." },
        { q: "The climate of Chicago is ________ that of many other continental cities.", options: ["like", "similar to", "as", "same"], correct: 1, hint: "Perbandingan yang tepat: 'similar to'." },
        { q: "________ orbits the sun, it exhibits a characteristic tail.", options: ["As a comet", "A comet", "If a comet", "That a comet"], correct: 0, hint: "Butuh konjungsi di awal." },
        { q: "The discovery of the telescope ________ possible the study of distant stars.", options: ["it made", "making", "which made", "made"], correct: 3, hint: "Butuh Verb setelah 'The discovery'." },
        { q: "________ of the world's supply of diamonds is mined in South Africa.", options: ["A large", "Large", "A large percentage", "Percentage"], correct: 2, hint: "Butuh quantifier lengkap." },
        { q: "The growth of skeletal muscles ________ by continuous exercise.", options: ["is stimulated", "stimulate", "stimulating", "be stimulated"], correct: 0, hint: "Passive Present tunggal." },
        { q: "The first draft of the budget ________ by the committee yesterday.", options: ["was approved", "approved", "approving", "has approved"], correct: 0, hint: "Passive Past (yesterday)." },
        { q: "In the United States, ________ is the most important grain crop.", options: ["it is corn", "corn that", "which corn", "corn"], correct: 3, hint: "Hanya butuh Subject sederhana." },
        { q: "The more the temperature rises, ________ the air can hold.", options: ["more water vapor", "water vapor", "the more water vapor", "most water vapor"], correct: 2, hint: "Pola: The more... the more..." },
        { q: "The digestive system ________ food into substances the body can use.", options: ["breaking down", "breaks down", "break down", "is broken down"], correct: 1, hint: "Verb untuk Subject tunggal." },
        { q: "The planet Mercury ________ its own axis once every 59 days.", options: ["rotates on", "rotate on", "rotating on", "is rotating on"], correct: 0, hint: "Fakta ilmiah tunggal." },
        { q: "Theodore Roosevelt was ________ president of the United States.", options: ["the twenty-sixth", "twenty-sixth", "a twenty-sixth", "the twenty-six"], correct: 0, hint: "Urutan diawali 'the'." },
        { q: "A liquid ________ to a gas when it is heated to its boiling point.", options: ["changing", "changes", "change", "is changed"], correct: 1, hint: "Simple Present aktif." },
        { q: "Not only ________ atoms the smallest units of matter, but they also combine to form molecules.", options: ["do", "are", "be", "is"], correct: 1, hint: "Inversi setelah 'Not only'." },
        { q: "The first census ________ in the United States in 1790.", options: ["was conducted", "conducted", "conducting", "has conducted"], correct: 0, hint: "Past Passive." },
        { q: "Butterflies ________ a lifespan that varies from a few days to several months.", options: ["has", "is having", "which have", "have"], correct: 3, hint: "Butterflies (Jamak)." },
        { q: "A vacuum will not ________ sound.", options: ["transmits", "transmit", "transmitting", "transmitted"], correct: 1, hint: "Setelah 'will' butuh Bare Infinitive." },

        // ADVANCED (21-30)
        {
          q: "Not until the late nineteenth century ________ a decimal system of coinage.",
          options: ["the UK did adopt", "did the UK adopt", "the UK adopted", "had adopted the UK"],
          correct: 1,
          hint: "Inversi setelah frase negatif 'Not until'.",
        },
        { q: "________ the evidence is against him, the defendant continues to protest.", options: ["Despite", "In spite of", "Even though", "However"], correct: 2, hint: "Konjungsi untuk klausa utuh." },
        { q: "The more energy an economy consumes, ________ its level of industrialization.", options: ["the higher is", "higher", "the higher", "it is higher"], correct: 2, hint: "Pola perbandingan sejajar." },
        { q: "Only after the pilot checked the engines ________ the plane to take off.", options: ["he allowed", "was he allowed", "allowed he", "did he allowed"], correct: 1, hint: "Inversi setelah 'Only after'." },
        { q: "Rarely ________ for more than a few seconds in the wild.", options: ["a tiger sleeps", "does a tiger sleep", "sleeping a tiger", "is a tiger sleep"], correct: 1, hint: "Inversi setelah Adverbia negatif 'Rarely'." },
        { q: "No sooner had the rain stopped ________ the sun came out.", options: ["when", "than", "then", "and"], correct: 1, hint: "Pasangan 'No sooner' adalah 'than'." },
        { q: "Had the committee known the facts, they ________ the project.", options: ["would not start", "had not started", "would not have started", "will not start"], correct: 2, hint: "Conditional Type 3 (Past Unreal)." },
        { q: "________ for the heavy traffic, we would have arrived on time.", options: ["Were it not", "If it was not", "Had it not been", "It had not been"], correct: 2, hint: "Inversi 'If it had not been'." },
        { q: "So intense ________ that the explorers had to retreat.", options: ["the heat was", "was the heat", "it was the heat", "the heat being"], correct: 1, hint: "Inversi setelah 'So + adjective'." },
        { q: "Under no circumstances ________ the door be left unlocked.", options: ["should", "must the", "the should", "should the"], correct: 3, hint: "Inversi setelah 'Under no circumstances'." },
      ];

      let currentQuestion = 0;
      let wrongCount = 0;

      function showModal(msg, icon) {
        const modal = document.getElementById("customModal");
        document.getElementById("modalMessage").innerHTML = msg;
        document.getElementById("modalIcon").innerText = icon;
        modal.classList.add("active");
      }

      function closeModal() {
        document.getElementById("customModal").classList.remove("active");
      }

      function startQuiz() {
        document.getElementById("intro").classList.add("hidden");
        document.getElementById("quiz-content").classList.remove("hidden");
        showQuestion();
      }

      function showQuestion() {
        const q = questions[currentQuestion];
        document.getElementById("progress").innerText = `Question ${currentQuestion + 1} of ${questions.length}`;
        document.getElementById("question-text").innerText = q.q;

        const optionsDiv = document.getElementById("options-container");
        optionsDiv.innerHTML = "";

        q.options.forEach((opt, index) => {
          const btn = document.createElement("div");
          btn.className = "option";
          btn.innerText = opt;
          btn.onclick = () => checkAnswer(index);
          optionsDiv.appendChild(btn);
        });
      }

      function checkAnswer(index) {
        if (index === questions[currentQuestion].correct) {
          currentQuestion++;
          wrongCount = 0;
          if (currentQuestion < questions.length) {
            showQuestion();
          } else {
            showSuccess();
          }
        } else {
          wrongCount++;
          if (wrongCount >= 2) {
            showModal(`<strong>HINT:</strong> ${questions[currentQuestion].hint}`, "üí°");
          } else {
            showModal("Jawabannya kurang tepat, coba lagi ya Sayang! ‚ù§Ô∏è", "‚ùå");
          }
        }
      }

      function showSuccess() {
        // Sembunyikan intro dan quiz jika masih ada
        document.getElementById("intro").classList.add("hidden");
        document.getElementById("quiz-content").classList.add("hidden");

        // Tampilkan container success
        const successDiv = document.getElementById("success");
        successDiv.classList.remove("hidden");

        // Efek Selebrasi
        confetti({
          particleCount: 150,
          spread: 70,
          origin: { y: 0.6 },
        });

        // Masukkan Video secara dinamis
        const videoHTML = `
        <div style="margin-top: 20px; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.3); background: #000;">
            <video width="100%" controls autoplay>
                <source src="../asset/vidiovieryvania.mp4" type="video/mp4">
                Browser kamu tidak mendukung video tag.
            </video>
        </div>
        <audio id="bgMusic" loop>
            <source src="../asset/musikk.mp3" type="audio/mpeg">
        </audio>
    `;

        // Cek agar video tidak terduplikasi jika fungsi dipanggil berkali-kali
        if (!document.querySelector("video")) {
          successDiv.insertAdjacentHTML("beforeend", videoHTML);
        }
      }
    </script>
  </body>
</html>
