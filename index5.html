<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Page 5 — Final Riddle</title>
    <style>
      :root {
        --bg: #0b0e16;
        --ink: #eaf0ff;
        --muted: #9aa6bf;
        --card: #131a34;
        --border: #263056;
        --accent: #86e0ff;
        --good: #22c55e;
        --bad: #ef4444;
        --radius: 28px;
        --shadow: 0 24px 60px rgba(0, 0, 0, 0.45);
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        color: var(--ink);
        background: radial-gradient(1100px 520px at 15% -10%, #1a2b57 0%, transparent 60%) no-repeat, radial-gradient(1000px 640px at 110% 0%, #2a1c49 0%, transparent 60%) no-repeat, var(--bg);
        font: 16px/1.6 Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
        padding: 24px;
      }
      .wrap {
        max-width: 1100px;
        margin: 0 auto;
      }

      header {
        display: flex;
        align-items: center;
        gap: 14px;
        margin: 2px 0 18px;
      }
      .logo {
        width: 54px;
        height: 54px;
        border-radius: 14px;
        display: grid;
        place-items: center;
        background: conic-gradient(from 230deg, #2c3b63, #1b2140 35%, #12162b 70%, #2c3b63);
        color: #cfe0ff;
        font-weight: 800;
        box-shadow: var(--shadow), inset 0 -10px 20px rgba(0, 0, 0, 0.35);
      }
      h1 {
        margin: 0;
        font-size: clamp(24px, 3.4vw, 38px);
      }
      .subtitle {
        color: var(--muted);
      }

      .card {
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0) 60%), var(--card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        overflow: hidden;
      }
      .card-head {
        padding: 16px 18px 0;
        position: relative;
      }
      .badge {
        position: absolute;
        top: 14px;
        left: 14px;
        background: #121a39;
        border: 1px solid #2a3568;
        color: #d6e2ff;
        font-size: 12px;
        padding: 6px 10px;
        border-radius: 999px;
        letter-spacing: 0.2px;
      }

      /* Hero */
      .hero {
        display: grid;
        place-items: center;
        padding: 10px 18px 0;
      }
      .art {
        width: min(1000px, 96%);
        aspect-ratio: 16/9;
        border-radius: 20px;
        border: 1px solid #263056;
        overflow: hidden;
        background: #0f1530;
        position: relative;
      }
      /* background hearts */
      .hearts {
        position: absolute;
        inset: 0;
        opacity: 0.9;
      }
      .veil {
        position: absolute;
        inset: 0;
        backdrop-filter: blur(6px) saturate(0.8) brightness(0.9);
        transition: 0.4s;
      }
      body.solved .veil {
        backdrop-filter: none;
        background: transparent;
      }

      .card-body {
        padding: 16px 18px 24px;
      }
      h2 {
        margin: 0.3rem 0 0.4rem;
        font-size: 20px;
      }
      .muted {
        color: var(--muted);
      }
      .riddle {
        display: grid;
        gap: 10px;
        margin-top: 8px;
        background: #0e132a;
        border: 1px solid #263056;
        border-radius: 14px;
        padding: 12px 14px;
      }
      .riddle li {
        margin: 0.2rem 0;
      }
      .qa {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
        margin-top: 10px;
      }
      .answer {
        flex: 1 1 320px;
        min-width: 240px;
        font-size: 18px;
        padding: 12px 14px;
        border-radius: 12px;
        border: 1px solid #2a3355;
        background: #0e132a;
        color: #eaf0ff;
        outline: none;
        transition: 0.2s;
      }
      .answer:focus {
        border-color: #7ee0ff;
        box-shadow: 0 0 0 4px rgba(126, 224, 255, 0.12);
      }
      .btn {
        padding: 12px 18px;
        border-radius: 12px;
        border: 1px solid #2a3355;
        background: #16204a;
        color: #cfe0ff;
        cursor: pointer;
        transition: 0.2s;
      }
      .btn:hover {
        transform: translateY(-1px);
      }
      .btn.ok {
        background: #1b8a57;
        border-color: #1b8a57;
        color: #fff;
      }
      .btn.err {
        animation: shake 0.28s;
        border-color: var(--bad);
      }
      body::after {
        content: "5";
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: clamp(50px, 10vw, 100px);
        font-weight: 400;
        color: #86e0ff;
        opacity: 0.02; /* lebih kecil = lebih samar */
        filter: blur(1.5px);
        mix-blend-mode: screen;
        pointer-events: none;
        z-index: 0; /* biar di belakang konten */
      }
      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-6px);
        }
        50% {
          transform: translateX(6px);
        }
        75% {
          transform: translateX(-6px);
        }
      }

      .divider {
        height: 1px;
        background: linear-gradient(90deg, transparent, #2a3355, transparent);
        margin: 12px 0;
      }
      .success {
        display: none;
        margin-top: 10px;
        font-size: 14px;
        color: #c5ffd9;
        background: #0e2a18;
        border: 1px solid #1a4a2f;
        padding: 10px 12px;
        border-radius: 10px;
      }
      body.solved .success {
        display: block;
      }

      /* Hint modal (progressive) */
      .hint-modal-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(4, 7, 18, 0.55);
        display: none;
        align-items: center;
        justify-content: center;
        padding: 20px;
        z-index: 80;
        backdrop-filter: blur(2px);
      }
      .hint-modal {
        width: min(720px, 96vw);
        background: #121a36;
        border: 1px solid #2a3355;
        border-radius: 16px;
        box-shadow: 0 24px 60px rgba(0, 0, 0, 0.55);
        position: relative;
        animation: hintPop 0.22s ease-out;
      }
      @keyframes hintPop {
        from {
          opacity: 0;
          transform: translateY(8px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: none;
        }
      }
      .hint-close {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #1a2246;
        border: 1px solid #2d3972;
        color: #dbe6ff;
        font-size: 14px;
        line-height: 1;
        border-radius: 10px;
        padding: 6px 8px;
        cursor: pointer;
      }
      .hint-header {
        padding: 16px 18px 0;
      }
      .hint-badge {
        display: inline-block;
        font-size: 12px;
        color: #cfe0ff;
        background: #121a39;
        border: 1px solid #29326a;
        padding: 6px 10px;
        border-radius: 999px;
      }
      .hint-header h3 {
        margin: 8px 0 2px;
        font-size: 20px;
      }
      .hint-sub {
        margin: 0;
        color: #9aa6bf;
      }
      .hint-progress {
        margin-top: 6px;
        font-size: 12px;
        color: #9fb0da;
      }
      .hint-content {
        padding: 10px 18px 12px;
        display: grid;
        gap: 12px;
        max-height: 52vh;
        overflow: auto;
      }
      .hint-card {
        background: #0e132a;
        border: 1px solid #263056;
        border-radius: 12px;
        padding: 12px 14px;
      }
      .hint-chip {
        display: inline-block;
        font-size: 11px;
        color: #d7e6ff;
        background: #152047;
        border: 1px solid #30408a;
        padding: 4px 8px;
        border-radius: 999px;
        margin-bottom: 6px;
      }
      .hint-footer {
        padding: 6px 18px 16px;
        display: flex;
        justify-content: flex-end;
      }
      .pill-btn {
        border-radius: 999px;
      }
      body.modal-open {
        overflow: hidden;
      }

      /* Celebration confetti hearts */
      .confetti {
        position: fixed;
        inset: 0;
        pointer-events: none;
        display: none;
      }
      body.solved .confetti {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div class="logo">P5</div>
        <div>
          <h1>Final Riddle</h1>
          <div class="subtitle">Pecahkan kalimat rahasia terakhir ✨</div>
        </div>
      </header>

      <article class="card">
        <div class="card-head">
          <span class="badge" id="status">Locked</span>
        </div>

        <div class="hero">
          <div class="art">
            <!-- Decorative hearts background -->
            <svg class="hearts" viewBox="0 0 1200 675" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <defs>
                <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0" stop-color="#ff7aa6" />
                  <stop offset="1" stop-color="#a58bff" />
                </linearGradient>
              </defs>
              <rect width="1200" height="675" fill="#0f1530" />
              <g opacity=".25" fill="url(#g1)">
                <path d="M200,220 c-40,-50 -120,-20 -120,40 0,60 80,100 120,140 40,-40 120,-80 120,-140 0,-60 -80,-90 -120,-40z" />
                <path d="M950,180 c-35,-45 -105,-18 -105,35 0,53 70,88 105,123 35,-35 105,-70 105,-123 0,-53 -70,-80 -105,-35z" />
                <path d="M640,420 c-45,-55 -135,-22 -135,45 0,68 90,112 135,157 45,-45 135,-89 135,-157 0,-68 -90,-100 -135,-45z" />
              </g>
            </svg>
            <div class="veil"></div>
          </div>
        </div>

        <div class="card-body">
          <h2>Teka-teki</h2>
          <p class="muted">Gabungkan petunjuk berikut menjadi satu kalimat utuh berbahasa Indonesia.</p>
          <div class="qa">
            <input id="answer" class="answer" type="text" placeholder="ketik jawaban…" autocomplete="off" />
            <button id="checkBtn" class="btn">Periksa</button>
            <button id="openHints" class="btn" type="button" style="margin-left: auto">💡 Hint</button>
          </div>
          <div id="msg" class="muted" style="margin-top: 8px">Tulis kalimat lengkapnya ya.</div>
          <div class="divider"></div>
          <div class="success">✅ Benar! 💖</div>
        </div>
      </article>
    </div>

    <!-- Progressive Hint Modal -->
    <div id="hintsModal" class="hint-modal-backdrop" aria-hidden="true">
      <div class="hint-modal" role="dialog" aria-modal="true" aria-labelledby="hintTitle">
        <button class="hint-close" id="closeHints" aria-label="Close hints">✕</button>
        <div class="hint-header">
          <div class="hint-badge">Clues</div>
          <h3 id="hintTitle">Hint untuk Kalimat Rahasia</h3>
          <p class="hint-sub">Buka bertahap (maks 3). Gunakan hanya saat perlu 😉</p>
          <div class="hint-progress"><span id="hintCount">0</span>/3 revealed</div>
        </div>

        <div class="hint-content">
          <div class="hint-card" data-hint="1" hidden>
            <div class="hint-chip">Hint 1</div>
            <p>Pola kata persis: <strong>4 huruf</strong> – <strong>6 huruf</strong> – <strong>4 huruf</strong> – <strong>6 huruf</strong>.</p>
          </div>
          <div class="hint-card" data-hint="2" hidden>
            <div class="hint-chip">Hint 2</div>
            <p>Kalimatnya sering diucapkan untuk menyatakan rasa sayang ke pasangan.</p>
          </div>
          <div class="hint-card" data-hint="3" hidden>
            <div class="hint-chip">Hint 3</div>
            <p>Isi huruf: <code>SAYA&nbsp;SAYANG&nbsp;KAMU&nbsp;BANGET</code> (tanpa tanda baca tambahan).</p>
          </div>
        </div>

        <div class="hint-footer">
          <button id="revealNextHint" class="btn pill-btn" type="button">Reveal next hint</button>
        </div>
      </div>
    </div>

    <!-- Confetti hearts (CSS-only) -->
    <svg class="confetti" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
      <defs>
        <symbol id="heart" viewBox="0 0 32 29.6">
          <path
            fill="#ff7aa6"
            d="M23.6,0c-2.9,0-5.4,1.6-6.6,4C15.8,1.6,13.3,0,10.4,0C4.7,0,0,4.7,0,10.4c0,10.7,16.9,19.2,16.9,19.2
        S33.7,21.1,33.7,10.4C33.7,4.7,29,0,23.6,0z"
          />
        </symbol>
      </defs>
      <!-- sprinkle hearts -->
      <use href="#heart" x="5" y="10" width="6" height="6" />
      <use href="#heart" x="20" y="30" width="8" height="8" />
      <use href="#heart" x="40" y="15" width="5" height="5" />
      <use href="#heart" x="65" y="5" width="7" height="7" />
      <use href="#heart" x="80" y="28" width="6" height="6" />
      <use href="#heart" x="15" y="70" width="7" height="7" />
      <use href="#heart" x="55" y="80" width="8" height="8" />
      <use href="#heart" x="78" y="60" width="6" height="6" />
    </svg>

    <script>
      // ====== Answer check ======
      const ans = document.getElementById("answer");
      const btn = document.getElementById("checkBtn");
      const msg = document.getElementById("msg");
      const statusBadge = document.getElementById("status");

      function normalize(s) {
        return (s || "")
          .toLowerCase()
          .normalize("NFKD")
          .replace(/\s+/g, " ") // rapikan spasi
          .replace(/[^a-z\s]/g, "") // huruf saja
          .trim();
      }
      const correct = normalize("SAYA SAYANG KAMU BANGET");

      function unlockUI() {
        document.body.classList.add("solved");
        btn.classList.remove("err");
        btn.classList.add("ok");
        btn.textContent = "Unlocked";
        msg.textContent = "Ya! Kamu berhasil ❤️";
        if (statusBadge) {
          statusBadge.textContent = "Unlocked";
          statusBadge.style.background = "#0e2a18";
          statusBadge.style.borderColor = "#1a4a2f";
          statusBadge.style.color = "#c5ffd9";
        }
        setTimeout(() => {
          window.location.href = "index6.html";
        }, 1500);
      }

      btn.addEventListener("click", () => {
        const val = normalize(ans.value);
        if (val === correct) unlockUI();
        else {
          btn.classList.remove("ok");
          btn.classList.add("err");
          msg.textContent = "Belum tepat. Coba lagi pelan-pelan, atau buka Hint.";
          if (statusBadge) statusBadge.textContent = "Locked";
        }
      });
      ans.addEventListener("keydown", (e) => {
        if (e.key === "Enter") btn.click();
      });

      // ====== Progressive Hints Modal ======
      (function () {
        const modal = document.getElementById("hintsModal");
        const openBtn = document.getElementById("openHints");
        const closeBtn = document.getElementById("closeHints");
        const revealBtn = document.getElementById("revealNextHint");
        const counter = document.getElementById("hintCount");

        let revealed = 0; // 0..3
        const maxHints = 3;

        function openModal() {
          modal.style.display = "flex";
          document.body.classList.add("modal-open");
          modal.setAttribute("aria-hidden", "false");
          closeBtn && closeBtn.focus();
        }
        function closeModal() {
          modal.style.display = "none";
          document.body.classList.remove("modal-open");
          modal.setAttribute("aria-hidden", "true");
          openBtn && openBtn.focus();
        }
        function showHint(n) {
          const card = modal.querySelector('.hint-card[data-hint="' + n + '"]');
          if (card && card.hasAttribute("hidden")) card.removeAttribute("hidden");
        }
        function updateRevealBtn() {
          if (revealed >= maxHints) {
            revealBtn.disabled = true;
            revealBtn.textContent = "All hints revealed";
          } else {
            revealBtn.disabled = false;
            revealBtn.textContent = "Reveal next hint";
          }
          counter.textContent = revealed;
        }

        openBtn && openBtn.addEventListener("click", openModal);
        closeBtn && closeBtn.addEventListener("click", closeModal);
        modal &&
          modal.addEventListener("click", (e) => {
            if (e.target === modal) closeModal();
          });
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && modal.style.display === "flex") closeModal();
        });

        revealBtn &&
          revealBtn.addEventListener("click", () => {
            if (revealed < maxHints) {
              revealed += 1;
              showHint(revealed);
              updateRevealBtn();
            }
          });

        updateRevealBtn();
      })();
    </script>
  </body>
</html>
